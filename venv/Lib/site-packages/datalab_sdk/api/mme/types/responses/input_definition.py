from dataclasses import field
from marshmallow_dataclass import dataclass
from typing import Union, List
from datalab_sdk.api.common.schema import CamelCaseSchema
from datalab_sdk.api.mme.types.shared.datum_key import DatumKey
from datalab_sdk.api.mme.types.responses.data_definition import DataDefinition
from datalab_sdk.api.mme.types.responses.display_definition import DisplayDefinition
from datalab_sdk.api.mme.types.responses.model_key import ModelKey
from datalab_sdk.api.mme.types.responses.data_source_context import DataSourceContext
from datalab_sdk.api.mme.types.responses.requirements import Requirements


@dataclass(base_schema=CamelCaseSchema)
class InputDefinition:
    datum_key: DatumKey
    data_definition: DataDefinition
    display_definition: DisplayDefinition
    requirement: Requirements
    model_key: Union[ModelKey, None] = None
    data_source_contexts: List[DataSourceContext] = field(default_factory=list)
