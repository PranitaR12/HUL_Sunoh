from marshmallow_dataclass import dataclass
from datalab_sdk.api.common.schema import CamelCaseSchema, CamelCaseSchemaWithCapitalId
from typing import Dict, List

@dataclass(base_schema=CamelCaseSchemaWithCapitalId)
class SessionInput:
    name: str
    type: str
    source: str
    source_id: str

@dataclass(base_schema=CamelCaseSchema)
class SessionContext:
    name: str
    tool_id: str
    tool_version_id: str
    inputs: List[SessionInput]
    status: str
    tool_viewer_access_groups: List[str]

@dataclass(base_schema=CamelCaseSchemaWithCapitalId)
class SnapshotOutput:
    name: str
    type: str
    source: str
    source_id: str

@dataclass(base_schema=CamelCaseSchema)
class RegisterSnapshotRequest:
    session_id: str
    has_completed: bool
    was_successful: bool
    outputs: List[SnapshotOutput]
    timestamp: str

@dataclass(base_schema=CamelCaseSchema)
class ResultsViewUrl:
    results_view_url: str
